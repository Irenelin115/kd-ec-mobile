<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÁßëÂÆö‰ºÅÊ•≠Ë°åÂãï‰∏ãÂñÆÂπ≥Âè∞</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f3f4f6; /* Light gray background like HN Point */
            padding-bottom: 80px; /* Space for bottom nav */
        }
        
        /* Hide scrollbar for category list */
        .hide-scroll::-webkit-scrollbar {
            display: none;
        }
        .hide-scroll {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* KD Brand Colors */
        .text-kd { color: #003366; }
        .bg-kd { background-color: #003366; }
        .border-kd { border-color: #003366; }
        
        /* Product Card Shadow */
        .card-shadow {
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        
        /* Toast Animation */
        @keyframes slideUpFade {
            from { opacity: 0; transform: translate(-50%, 20px); }
            to { opacity: 1; transform: translate(-50%, 0); }
        }
        .toast-enter {
            animation: slideUpFade 0.3s ease-out forwards;
        }

        /* Share Dialog Styles - Fixed Version */
        .share-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 9999;
            display: none;
        }
        
        .share-overlay.show {
            display: block;
        }
        
        .share-dialog {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-radius: 20px 20px 0 0;
            padding: 20px;
            min-height: 200px;
        }
        
        .share-header {
            text-align: center;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
            margin-bottom: 20px;
            font-size: 18px;
            font-weight: bold;
        }
        
        .share-buttons {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
        }
        
        .share-btn {
            text-align: center;
            cursor: pointer;
            padding: 10px;
        }
        
        .share-btn-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            margin: 0 auto 8px auto;
        }
        
        .line-btn { background: #00C300; }
        .copy-btn { background: #666; }
        
        .close-btn {
            width: 100%;
            padding: 15px;
            background: #f0f0f0;
            border: none;
            border-radius: 8px;
            margin-top: 20px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .share-toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            display: none;
            z-index: 10000;
        }

        /* Banner Carousel Styles */
        .banner-carousel {
            position: relative;
            overflow: hidden;
        }
        
        .banner-slides {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }
        
        .banner-slide {
            min-width: 100%;
            position: relative;
        }
        
        .banner-indicators {
            position: absolute;
            bottom: 12px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            z-index: 10;
        }
        
        .banner-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.4);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .banner-indicator.active {
            background: rgba(255, 255, 255, 0.9);
            transform: scale(1.2);
        }
        
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- 1. Header (Sticky) -->
    <header class="fixed top-0 left-0 right-0 bg-white shadow-sm z-50">
        <div class="flex items-center justify-between px-4 py-3">
            <!-- Logo Area -->
            <div class="flex items-center gap-2">
                <img src="ÂïÜÂìÅÂúñÁâá/KD_LOGO.png" alt="ÁßëÂÆö‰ºÅÊ•≠" class="h-8 w-auto">
            </div>
            
            <!-- Actions -->
            <div class="flex items-center gap-4">
                <button onclick="focusSearch()" class="text-gray-600 text-xl"><i class="fas fa-search"></i></button>
                <div class="relative cursor-pointer" onclick="goToCart()">
                    <i class="fas fa-shopping-cart text-xl text-kd"></i>
                    <span id="cart-badge" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center border-2 border-white transform scale-0 transition-transform duration-200">0</span>
                </div>
            </div>
        </div>
        
        <!-- Search Bar (Optional, mimic HN Point style) -->
        <div class="px-4 pb-3">
            <div class="relative">
                <input type="text" id="searchInput" placeholder="ÊêúÂ∞ã‰øÆË£úÊºÜ„ÄÅÈªèËëóÂäë..." class="w-full bg-gray-100 border-none rounded-full py-2 pl-10 pr-4 text-sm focus:ring-2 focus:ring-blue-900 outline-none" onkeyup="handleSearch(event)" onkeypress="handleKeyPress(event)" oninput="handleSearch(event)">
                <i class="fas fa-search absolute left-4 top-2.5 text-gray-400 text-sm"></i>
                <button onclick="clearSearch()" id="clearBtn" class="absolute right-3 top-2 text-gray-400 hover:text-gray-600 hidden">
                    <i class="fas fa-times text-sm"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Spacer for Header -->
    <div class="h-[108px]"></div>

    <!-- 2. Banner Carousel -->
    <div class="w-full h-32 shadow-lg banner-carousel">
        <!-- Banner slides container -->
        <div class="banner-slides" id="bannerSlides">
            <!-- Banner slides will be injected here -->
        </div>
        
        <!-- Indicators -->
        <div class="banner-indicators" id="bannerIndicators">
            <!-- Indicators will be injected here -->
        </div>
    </div>

    <!-- 3. Category Tabs (Horizontal Scroll) -->
    <div class="bg-white py-2 shadow-sm sticky top-[108px] z-40">
        <div class="flex overflow-x-auto hide-scroll px-4 gap-3" id="category-container">
            <!-- Categories will be injected here -->
        </div>
    </div>

    <!-- 4. Product List -->
    <div class="px-3 py-4">
        <div class="flex items-center justify-between mb-3 px-1">
            <h3 class="font-bold text-gray-700 text-lg">ÁÜ±ÈñÄÊùêÊñô</h3>
            <span class="text-xs text-gray-500">ÂÖ± <span id="product-count">0</span> È†ÖÂïÜÂìÅ</span>
        </div>

        <div class="grid grid-cols-2 gap-3" id="product-grid">
            <!-- Products will be injected here via JS -->
        </div>
        
        <!-- Loading Sentinel -->
        <div class="text-center py-6 text-gray-400 text-sm">
            Ê≤íÊúâÊõ¥Â§öÂïÜÂìÅ‰∫Ü
        </div>
    </div>

    <!-- 5. Bottom Navigation (Fixed) -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 pb-safe z-50 h-[60px] flex justify-around items-center">
        <a href="#" class="flex flex-col items-center gap-1 text-kd w-1/5">
            <i class="fas fa-home text-lg"></i>
            <span class="text-[10px]">È¶ñÈ†Å</span>
        </a>
        <a href="#" class="flex flex-col items-center gap-1 text-gray-400 w-1/5 hover:text-kd">
            <i class="fas fa-th-large text-lg"></i>
            <span class="text-[10px]">ÂàÜÈ°û</span>
        </a>
        
        <!-- Center Action Button (Orders) -->
        <a href="orders.html" class="flex flex-col items-center gap-1 text-gray-400 w-1/5 hover:text-kd relative">
            <div class="absolute -top-6 bg-kd w-12 h-12 rounded-full border-4 border-gray-100 flex items-center justify-center text-white shadow-lg">
                <i class="fas fa-clipboard-list text-xl"></i>
            </div>
            <span class="text-[10px] mt-7">Êü•Ë®ÇÂñÆ</span>
        </a>

        <a href="#" class="flex flex-col items-center gap-1 text-gray-400 w-1/5 hover:text-kd" onclick="alert('ÈñãÂïüÊ•≠ÂãôÂ∞çË©±Ë¶ñÁ™ó')">
            <i class="fas fa-comment-alt text-lg"></i>
            <span class="text-[10px]">ËÅØÁµ°Ê•≠Âãô</span>
        </a>
        <a href="#" class="flex flex-col items-center gap-1 text-gray-400 w-1/5 hover:text-kd">
            <i class="fas fa-user text-lg"></i>
            <span class="text-[10px]">ÊúÉÂì°</span>
        </a>
    </nav>

    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-lg text-sm shadow-lg hidden z-50 flex items-center gap-2">
        <i class="fas fa-check-circle text-green-400"></i>
        <span>Â∑≤Âä†ÂÖ•Ë≥ºÁâ©Ëªä</span>
    </div>

    <!-- Share Dialog (Èö±ËóèÔºåÈ¶ñÈ†Å‰∏ç‰ΩøÁî®) -->
    <!-- <div id="shareModal" class="share-overlay" style="display: none;">
        <div class="share-dialog">
            <div class="share-header">ÂàÜ‰∫´Áµ¶ÊÇ®ÁöÑÂÆ∂‰∫∫ÊúãÂèãÔºÅ</div>
            <div class="share-buttons">
                <div class="share-btn" onclick="shareToLine(event)">
                    <div class="share-btn-icon line-btn">üì±</div>
                    <div>Line</div>
                </div>
                <div class="share-btn" onclick="copyLink(event)">
                    <div class="share-btn-icon copy-btn">üîó</div>
                    <div>Ë§áË£ΩÈÄ£Áµê</div>
                </div>
            </div>
            <button class="close-btn" onclick="closeShareDialog(event)">ÂèñÊ∂à</button>
        </div>
    </div>
    <div id="shareToast" class="share-toast"></div> -->

    <!-- Javascript -->
    <script>
        // Mock Data: KD Tools & Materials
        const products = [
            // ËßíÁ∑öÊºÜ/Ë†üÁ≠ÜÈ°ûÂà•
            {
                id: 1,
                category: 'paint',
                name: '‰øÆÈÇäÁ≠Ü',
                price: 60,
                originalPrice: null,
                image: 'ÂïÜÂìÅÂúñÁâá/‰øÆÈÇäÁ≠Ü.png',
                tag: '‰æøÊîú'
            },
            {
                id: 2,
                category: 'paint',
                name: '‰øÆÈÇäË†üÁ≠Ü',
                price: 85,
                originalPrice: null,
                image: 'ÂïÜÂìÅÂúñÁâá/‰øÆÈÇäË†üÁ≠Ü.png',
                tag: 'ÁÜ±Èä∑'
            },
            {
                id: 3,
                category: 'paint',
                name: 'ËßíÁ∑öÊºÜ(Âê´‰øÆÈÇäÁ≠Ü)',
                price: 170,
                originalPrice: null,
                image: 'ÂïÜÂìÅÂúñÁâá/ËßíÁ∑öÊºÜ(Âê´‰øÆÈÇäÁ≠Ü).png',
                tag: 'Â•óÁµÑ'
            },
            {
                id: 4,
                category: 'paint',
                name: 'ËßíÁ∑öÊºÜÁµÑ(Âê´‰øÆÈÇäÁ≠ÜÁ†ÇÁ¥ô)',
                price: 240,
                originalPrice: null,
                image: 'ÂïÜÂìÅÂúñÁâá/ËßíÁ∑öÊºÜÁµÑ(Âê´‰øÆÈÇäÁ≠ÜÁ†ÇÁ¥ô).png',
                tag: 'ÂÆåÊï¥Â•óÁµÑ'
            },
            // Âº∑ÂäõËÜ†È°ûÂà•
            {
                id: 5,
                category: 'glue',
                name: 'Âô¥ËÜ†-ÁßëÂÆö300(14.2KG-10Ê°∂)',
                price: 16000,
                originalPrice: null,
                image: 'ÂïÜÂìÅÂúñÁâá/Âô¥ËÜ†-ÁßëÂÆö300(14.2KG-10Ê°∂).png',
                tag: 'ÊâπÈáèÂÑ™ÊÉ†'
            },
            {
                id: 6,
                category: 'glue',
                name: 'Âô¥ËÜ†-ÁßëÂÆö300(14.2KG)',
                price: 1700,
                originalPrice: null,
                image: 'ÂïÜÂìÅÂúñÁâá/Âô¥ËÜ†-ÁßëÂÆö300(14.2KG).png',
                tag: 'Â∞àÊ•≠Áî®'
            },
            {
                id: 7,
                category: 'glue',
                name: 'Âô¥ËÜ†-ÁßëÂÆö300(3KG)',
                price: 400,
                originalPrice: null,
                image: 'ÂïÜÂìÅÂúñÁâá/Âô¥ËÜ†-ÁßëÂÆö300(3KG).png',
                tag: 'Â∞èÂåÖË£ù'
            },
            {
                id: 8,
                category: 'glue',
                name: 'Â°óËÜ†-ÁßëÂÆö305(14.2KG-10Ê°∂)',
                price: 16000,
                originalPrice: null,
                image: 'ÂïÜÂìÅÂúñÁâá/Â°óËÜ†-ÁßëÂÆö305(14.2KG-10Ê°∂).png',
                tag: 'ÊâπÈáèÂÑ™ÊÉ†'
            },
            {
                id: 9,
                category: 'glue',
                name: 'Â°óËÜ†-ÁßëÂÆö305(14.2KG)',
                price: 1700,
                originalPrice: null,
                image: 'ÂïÜÂìÅÂúñÁâá/Â°óËÜ†-ÁßëÂÆö305(14.2KG).png',
                tag: 'Â∞àÊ•≠Áî®'
            }
        ];

        const categories = [
            { id: 'all', name: 'ÂÖ®ÈÉ®ÂïÜÂìÅ' },
            { id: 'glue', name: 'Âº∑ÂäõËÜ†' },
            { id: 'paint', name: 'ËßíÁ∑öÊºÜ/Ë†üÁ≠Ü' },
            { id: 'tools', name: 'Â∑•ÂÖ∑ÈÖç‰ª∂' },
            { id: 'materials', name: 'Ë£ù‰øÆÂ∫ïÊùê' }
        ];

        let currentCategory = 'all';
        let cartCount = 0;
        let searchKeyword = '';

        // Render Functions
        function renderCategories() {
            const container = document.getElementById('category-container');
            container.innerHTML = categories.map(cat => `
                <button 
                    onclick="filterCategory('${cat.id}')"
                    class="whitespace-nowrap px-4 py-1.5 rounded-full text-sm font-medium transition-colors duration-200 ${
                        currentCategory === cat.id 
                        ? 'bg-kd text-white shadow-md' 
                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                    }">
                    ${cat.name}
                </button>
            `).join('');
        }

        function renderProducts() {
            const grid = document.getElementById('product-grid');
            const countLabel = document.getElementById('product-count');
            
            let filtered = currentCategory === 'all' 
                ? products 
                : products.filter(p => p.category === currentCategory);
            
            // Apply search filter if there's a search keyword
            if (searchKeyword.trim()) {
                filtered = filtered.filter(p => 
                    p.name.toLowerCase().includes(searchKeyword.toLowerCase())
                );
            }
            
            countLabel.innerText = filtered.length;

            grid.innerHTML = filtered.map(product => `
                <div onclick="openProductDetail(${product.id})" class="bg-white rounded-lg card-shadow overflow-hidden flex flex-col h-full active:scale-[0.98] transition-transform duration-100 cursor-pointer">
                    <div class="relative w-full h-40 bg-gray-200 flex items-center justify-center overflow-hidden">
                        <!-- Real Product Image -->
                        <img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover">
                        ${product.tag ? `<span class="absolute top-2 left-2 bg-red-500 text-white text-[10px] px-2 py-0.5 rounded shadow">${product.tag}</span>` : ''}
                    </div>
                    
                    <div class="p-3 flex flex-col flex-grow">
                        <h4 class="text-sm font-bold text-gray-800 line-clamp-2 leading-relaxed h-10 mb-1">${product.name}</h4>
                        
                        <div class="mt-auto">
                            <div class="flex items-baseline gap-2">
                                <span class="text-red-600 font-bold text-lg">NT$${product.price}</span>
                                ${product.originalPrice ? `<span class="text-xs text-gray-400 line-through">NT$${product.originalPrice}</span>` : ''}
                            </div>
                            
                            <button 
                                onclick="addToCart(this)"
                                class="w-full mt-3 bg-white border border-kd text-kd hover:bg-kd hover:text-white py-2 rounded font-medium text-sm transition-colors duration-200 flex items-center justify-center gap-1">
                                <i class="fas fa-cart-plus"></i>
                                Âä†ÂÖ•Ë≥ºÁâ©Ëªä
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Logic Functions
        function filterCategory(catId) {
            currentCategory = catId;
            renderCategories();
            renderProducts();
        }

        function addToCart(btn) {
            // Get product ID from button's parent card
            const productCard = btn.closest('[onclick*="openProductDetail"]');
            if (!productCard) return;
            
            const productIdMatch = productCard.getAttribute('onclick').match(/openProductDetail\((\d+)\)/);
            if (!productIdMatch) return;
            
            const productId = parseInt(productIdMatch[1]);
            const product = products.find(p => p.id === productId);
            
            if (!product) return;

            // Add to cart in localStorage
            addProductToCart(product, 1);

            // UI Feedback
            const badge = document.getElementById('cart-badge');
            updateCartBadgeFromStorage();
            
            // Button Animation
            const originalText = btn.innerHTML;
            btn.classList.add('bg-kd', 'text-white');
            btn.classList.remove('bg-white', 'text-kd');
            btn.innerHTML = '<i class="fas fa-check"></i> Â∑≤Âä†ÂÖ•';
            
            setTimeout(() => {
                btn.classList.remove('bg-kd', 'text-white');
                btn.classList.add('bg-white', 'text-kd');
                btn.innerHTML = originalText;
            }, 1000);

            // Toast Notification
            showToast();
        }

        // Add product to cart in localStorage
        function addProductToCart(product, quantity) {
            const existingCart = JSON.parse(localStorage.getItem('kd-cart') || '[]');
            const existingIndex = existingCart.findIndex(item => item.id === product.id);
            
            if (existingIndex !== -1) {
                existingCart[existingIndex].quantity += quantity;
            } else {
                existingCart.push({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    image: product.image,
                    quantity: quantity
                });
            }
            
            localStorage.setItem('kd-cart', JSON.stringify(existingCart));
        }

        // Update cart badge from localStorage
        function updateCartBadgeFromStorage() {
            const cart = JSON.parse(localStorage.getItem('kd-cart') || '[]');
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            
            const badge = document.getElementById('cart-badge');
            badge.innerText = totalItems;
            
            if (totalItems > 0) {
                badge.classList.remove('scale-0');
            } else {
                badge.classList.add('scale-0');
            }
        }

        // Go to cart page
        function goToCart() {
            window.location.href = 'cart.html';
        }

        function showToast() {
            const toast = document.getElementById('toast');
            toast.classList.remove('hidden');
            toast.classList.add('toast-enter');
            
            // Reset after 2 seconds
            setTimeout(() => {
                toast.classList.remove('toast-enter');
                toast.classList.add('hidden');
            }, 2000);
        }

        // Open product detail page
        function openProductDetail(productId) {
            window.location.href = `product-detail.html?id=${productId}`;
        }

        // Share functions - Fixed version
        function openShareDialog(event) {
            console.log('üöÄ ÈñãÂßãÂü∑Ë°å openShareDialog()');
            
            // ÈòªÊ≠¢‰∫ã‰ª∂ÂÜíÊ≥°
            if (event) {
                event.preventDefault();
                event.stopPropagation();
                console.log('üõë ‰∫ã‰ª∂ÂÜíÊ≥°Â∑≤ÈòªÊ≠¢');
            }
            
            try {
                const modal = document.getElementById('shareModal');
                console.log('üîç ÊâæÂà∞ÁöÑ modal ÂÖÉÁ¥†:', modal);
                
                if (modal) {
                    console.log('üéØ Ê∫ñÂÇôÊ∑ªÂä† show class');
                    modal.classList.add('show');
                    console.log('‚úÖ show class Â∑≤Ê∑ªÂä†');
                    console.log('üìù ÁõÆÂâçÁöÑ classList:', modal.classList.toString());
                    
                    // Á≠â‰∏Ä‰∏ãÂÜçÊ™¢Êü•ÊòØÂê¶ÁúüÁöÑÈ°ØÁ§∫
                    setTimeout(() => {
                        const computedStyle = window.getComputedStyle(modal);
                        console.log('üîç Ê™¢Êü•È°ØÁ§∫ÁãÄÊÖã - display:', computedStyle.display);
                        console.log('üîç Ê™¢Êü•È°ØÁ§∫ÁãÄÊÖã - visibility:', computedStyle.visibility);
                    }, 100);
                } else {
                    console.error('‚ùå Êâæ‰∏çÂà∞ shareModal ÂÖÉÁ¥†ÔºÅ');
                }
            } catch (error) {
                console.error('üí• openShareDialog() ÁôºÁîüÈåØË™§:', error);
            }
        }

        function closeShareDialog(event) {
            console.log('üîí Âü∑Ë°å closeShareDialog()');
            
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }
            
            const modal = document.getElementById('shareModal');
            if (modal) {
                modal.classList.remove('show');
                console.log('‚úÖ Â∞çË©±Ê°ÜÂ∑≤ÈóúÈñâ');
            }
        }

        function shareToLine(event) {
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }
            
            const url = window.location.href;
            const text = 'ÁßëÂÆö‰ºÅÊ•≠Ë°åÂãï‰∏ãÂñÆÂπ≥Âè∞\nÂ∞àÊ•≠Ë£ù‰øÆÊùêÊñôÔºåÂìÅË≥™‰øùË≠â';
            const lineUrl = `https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}`;
            
            console.log('üì§ ÂàÜ‰∫´Âà∞ LINE...');
            window.open(lineUrl, '_blank');
            closeShareDialog();
            showShareToast('Â∑≤ÂàÜ‰∫´Âà∞ LINE');
        }

        function copyLink(event) {
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }
            
            const url = window.location.href;
            console.log('üìã Ë§áË£ΩÈÄ£Áµê:', url);
            
            if (navigator.clipboard) {
                navigator.clipboard.writeText(url).then(() => {
                    closeShareDialog();
                    showShareToast('ÈÄ£ÁµêÂ∑≤Ë§áË£ΩÂà∞Ââ™Ë≤ºÊùø');
                }).catch(() => {
                    fallbackCopyText(url);
                });
            } else {
                fallbackCopyText(url);
            }
        }

        function fallbackCopyText(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            
            try {
                document.execCommand('copy');
                closeShareDialog();
                showShareToast('ÈÄ£ÁµêÂ∑≤Ë§áË£ΩÂà∞Ââ™Ë≤ºÊùø');
            } catch (error) {
                closeShareDialog();
                showShareToast('ÁÑ°Ê≥ïË§áË£ΩÈÄ£Áµê');
            }
            
            document.body.removeChild(textArea);
        }

        function showShareToast(message) {
            const toast = document.getElementById('shareToast');
            toast.textContent = message;
            toast.style.display = 'block';
            
            setTimeout(() => {
                toast.style.display = 'none';
            }, 2000);
        }

        // Banner Carousel Data
        const banners = [
            {
                id: 1,
                image: 'ÂïÜÂìÅÂúñÁâá/Banner1.jpg',
                alt: 'ÁßëÂÆö‰ºÅÊ•≠Âª£Âëä1'
            },
            {
                id: 2,
                image: 'ÂïÜÂìÅÂúñÁâá/Banner2.jpg',
                alt: 'ÁßëÂÆö‰ºÅÊ•≠Âª£Âëä2'
            },
            {
                id: 3,
                image: 'ÂïÜÂìÅÂúñÁâá/Banner3.jpg',
                alt: 'ÁßëÂÆö‰ºÅÊ•≠Âª£Âëä3'
            },
            {
                id: 4,
                image: 'ÂïÜÂìÅÂúñÁâá/Banner4.jpg',
                alt: 'ÁßëÂÆö‰ºÅÊ•≠Âª£Âëä4'
            },
            {
                id: 5,
                image: 'ÂïÜÂìÅÂúñÁâá/Banner5.jpg',
                alt: 'ÁßëÂÆö‰ºÅÊ•≠Âª£Âëä5'
            }
        ];

        let currentSlide = 0;
        let bannerInterval = null;

        // Render Banner Carousel
        function renderBannerCarousel() {
            const slidesContainer = document.getElementById('bannerSlides');
            const indicatorsContainer = document.getElementById('bannerIndicators');

            // Render slides - clean images without overlays
            slidesContainer.innerHTML = banners.map(banner => `
                <div class="banner-slide w-full h-32 relative overflow-hidden">
                    <img src="${banner.image}" alt="${banner.alt}" 
                         class="w-full h-full object-cover" 
                         onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    
                    <!-- Fallback content if image fails to load -->
                    <div class="w-full h-full bg-gradient-to-r from-gray-800 to-gray-900 flex items-center justify-center text-white" style="display: none;">
                        <div class="text-center">
                            <i class="fas fa-tools text-4xl mb-2 opacity-50"></i>
                            <p class="text-sm">ËºâÂÖ•‰∏≠...</p>
                        </div>
                    </div>
                </div>
            `).join('');

            // Render indicators
            indicatorsContainer.innerHTML = banners.map((_, index) => `
                <div class="banner-indicator ${index === 0 ? 'active' : ''}" 
                     onclick="goToSlide(${index})"></div>
            `).join('');
        }

        // Go to specific slide
        function goToSlide(slideIndex) {
            currentSlide = slideIndex;
            updateCarousel();
            updateIndicators();
            resetAutoSlide();
        }

        // Next slide
        function nextSlide() {
            currentSlide = (currentSlide + 1) % banners.length;
            updateCarousel();
            updateIndicators();
            resetAutoSlide();
        }

        // Update carousel position
        function updateCarousel() {
            const slidesContainer = document.getElementById('bannerSlides');
            const translateX = -currentSlide * 100;
            slidesContainer.style.transform = `translateX(${translateX}%)`;
        }

        // Update indicators
        function updateIndicators() {
            const indicators = document.querySelectorAll('.banner-indicator');
            indicators.forEach((indicator, index) => {
                indicator.classList.toggle('active', index === currentSlide);
            });
        }

        // Auto slide functionality
        function startAutoSlide() {
            bannerInterval = setInterval(() => {
                nextSlide();
            }, 4000); // Change slide every 4 seconds
        }

        function resetAutoSlide() {
            clearInterval(bannerInterval);
            startAutoSlide();
        }

        function stopAutoSlide() {
            clearInterval(bannerInterval);
        }

        // Pause auto-slide when hovering
        function setupBannerEvents() {
            const carousel = document.querySelector('.banner-carousel');
            carousel.addEventListener('mouseenter', stopAutoSlide);
            carousel.addEventListener('mouseleave', startAutoSlide);
        }

        // Search Functions
        function handleSearch(event) {
            const searchInput = event.target;
            const clearBtn = document.getElementById('clearBtn');
            
            searchKeyword = searchInput.value;
            
            // Show/hide clear button
            if (searchKeyword.trim()) {
                clearBtn.classList.remove('hidden');
            } else {
                clearBtn.classList.add('hidden');
            }
            
            // Re-render products with search filter
            renderProducts();
        }
        
        function clearSearch() {
            const searchInput = document.getElementById('searchInput');
            const clearBtn = document.getElementById('clearBtn');
            
            searchInput.value = '';
            searchKeyword = '';
            clearBtn.classList.add('hidden');
            
            // Re-render products without search filter
            renderProducts();
            
            // Focus back to search input
            searchInput.focus();
        }
        
        function focusSearch() {
            const searchInput = document.getElementById('searchInput');
            searchInput.focus();
            searchInput.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderCategories();
            renderProducts();
            updateCartBadgeFromStorage();
            renderBannerCarousel();
            setupBannerEvents();
            startAutoSlide();
            console.log('üöÄ È¶ñÈ†ÅËºâÂÖ•ÂÆåÊàê');
        });

    </script>
</body>
</html>