<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>科定 EC 下單平台 - 木工材料專業供應</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f3f4f6; /* Light gray background like HN Point */
            padding-bottom: 80px; /* Space for bottom nav */
        }
        
        /* Hide scrollbar for category list */
        .hide-scroll::-webkit-scrollbar {
            display: none;
        }
        .hide-scroll {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* KD Brand Colors */
        .text-kd { color: #003366; }
        .bg-kd { background-color: #003366; }
        .border-kd { border-color: #003366; }
        
        /* Product Card Shadow */
        .card-shadow {
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        
        /* Toast Animation */
        @keyframes slideUpFade {
            from { opacity: 0; transform: translate(-50%, 20px); }
            to { opacity: 1; transform: translate(-50%, 0); }
        }
        .toast-enter {
            animation: slideUpFade 0.3s ease-out forwards;
        }
        
        /* 大字體模式 - 適合50+歲用戶 */
        .large-font .text-sm { font-size: 1rem; }
        .large-font .text-xs { font-size: 0.875rem; }
        .large-font .text-lg { font-size: 1.5rem; }
        .large-font .text-xl { font-size: 1.75rem; }
        .large-font button { min-height: 48px; }
        .large-font .py-2 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- 1. Header (Sticky) -->
    <header class="fixed top-0 left-0 right-0 bg-white shadow-sm z-50">
        <div class="flex items-center justify-between px-4 py-3">
            <!-- Logo Area -->
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-kd rounded flex items-center justify-center text-white font-bold">KD</div>
                <h1 class="text-xl font-bold text-kd tracking-wide">科定企業</h1>
            </div>
            
            <!-- Actions -->
            <div class="flex items-center gap-3">
                <button onclick="toggleFontSize()" class="text-gray-600 text-lg" title="大字模式">
                    <i class="fas fa-text-height"></i>
                </button>
                <button class="text-gray-600 text-xl"><i class="fas fa-search"></i></button>
                <div class="relative cursor-pointer" onclick="alert('進入購物車')">
                    <i class="fas fa-shopping-cart text-xl text-kd"></i>
                    <span id="cart-badge" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center border-2 border-white transform scale-0 transition-transform duration-200">0</span>
                </div>
            </div>
        </div>
        
        <!-- Search Bar (Optional, mimic HN Point style) -->
        <div class="px-4 pb-3">
            <div class="relative">
                <input type="text" placeholder="搜尋修補漆、黏著劑..." class="w-full bg-gray-100 border-none rounded-full py-2 pl-10 pr-4 text-sm focus:ring-2 focus:ring-blue-900 outline-none">
                <i class="fas fa-search absolute left-4 top-2.5 text-gray-400 text-sm"></i>
            </div>
        </div>
    </header>

    <!-- Spacer for Header -->
    <div class="h-[108px]"></div>

    <!-- 2. Banner Area -->
    <div class="px-4 py-3">
        <div class="w-full h-32 bg-gradient-to-r from-gray-800 to-gray-900 rounded-xl flex items-center justify-between px-6 text-white shadow-lg relative overflow-hidden">
            <div class="z-10">
                <h2 class="text-lg font-bold mb-1">線上下單 專業便利</h2>
                <p class="text-sm text-gray-300">木工材料 快速叫料</p>
                <button class="mt-2 bg-yellow-500 text-gray-900 text-xs font-bold px-3 py-1.5 rounded-full">立即選購</button>
            </div>
            <!-- Decorative Icon -->
            <i class="fas fa-tools text-6xl text-white opacity-10 absolute -right-2 -bottom-4"></i>
        </div>
    </div>

    <!-- 3. Category Tabs (Horizontal Scroll) -->
    <div class="bg-white py-2 shadow-sm sticky top-[108px] z-40">
        <div class="flex overflow-x-auto hide-scroll px-4 gap-3" id="category-container">
            <!-- Categories will be injected here -->
        </div>
    </div>

    <!-- 師傅專用快速叫料橫幅 -->
    <div class="px-4 py-3">
        <div class="bg-green-50 border border-green-200 rounded-xl p-4 flex items-center gap-3">
            <div class="bg-green-100 w-12 h-12 rounded-full flex items-center justify-center">
                <i class="fab fa-line text-green-600 text-xl"></i>
            </div>
            <div class="flex-1">
                <h3 class="font-bold text-gray-800 text-sm">木工師傅專用</h3>
                <p class="text-xs text-gray-600 mt-0.5">點選「快速叫料」→ 5分鐘內業務回覆報價</p>
            </div>
            <button onclick="openLineChat()" class="bg-green-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-600 transition-colors">
                立即聯絡
            </button>
        </div>
    </div>

    <!-- 4. Product List -->
    <div class="px-3 py-4">
        <div class="flex items-center justify-between mb-3 px-1">
            <h3 class="font-bold text-gray-700 text-lg">熱門材料</h3>
            <span class="text-xs text-gray-500">共 <span id="product-count">0</span> 項商品</span>
        </div>

        <div class="grid grid-cols-2 gap-3" id="product-grid">
            <!-- Products will be injected here via JS -->
        </div>
        
        <!-- Loading Sentinel -->
        <div class="text-center py-6 text-gray-400 text-sm">
            沒有更多商品了
        </div>
    </div>

    <!-- 5. Bottom Navigation (Fixed) -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 pb-safe z-50 h-[60px] flex justify-around items-center">
        <a href="#" class="flex flex-col items-center gap-1 text-kd w-1/5">
            <i class="fas fa-home text-lg"></i>
            <span class="text-[10px]">首頁</span>
        </a>
        <a href="#" class="flex flex-col items-center gap-1 text-gray-400 w-1/5 hover:text-kd">
            <i class="fas fa-th-large text-lg"></i>
            <span class="text-[10px]">分類</span>
        </a>
        
        <!-- Center Action Button (Orders) -->
        <a href="#" class="flex flex-col items-center gap-1 text-gray-400 w-1/5 hover:text-kd relative">
            <div class="absolute -top-6 bg-kd w-12 h-12 rounded-full border-4 border-gray-100 flex items-center justify-center text-white shadow-lg">
                <i class="fas fa-clipboard-list text-xl"></i>
            </div>
            <span class="text-[10px] mt-7">查訂單</span>
        </a>

        <a href="#" class="flex flex-col items-center gap-1 text-gray-400 w-1/5 hover:text-kd" onclick="openLineChat()">
            <i class="fab fa-line text-lg"></i>
            <span class="text-[10px]">LINE叫料</span>
        </a>
        <a href="#" class="flex flex-col items-center gap-1 text-gray-400 w-1/5 hover:text-kd">
            <i class="fas fa-user text-lg"></i>
            <span class="text-[10px]">會員</span>
        </a>
    </nav>

    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-lg text-sm shadow-lg hidden z-50 flex items-center gap-2">
        <i class="fas fa-check-circle text-green-400"></i>
        <span>已加入購物車</span>
    </div>

    <!-- Javascript -->
    <script>
        // Mock Data: KD Tools & Materials
        const products = [
            {
                id: 1,
                category: 'flooring',
                name: '科定 KD 橡木地板 15mm',
                price: 1850,
                originalPrice: 2100,
                image: '橡木地板',
                tag: '熱銷'
            },
            {
                id: 2,
                category: 'flooring',
                name: '科定 KD 胡桃木地板 15mm',
                price: 2200,
                originalPrice: 2500,
                image: '胡桃木地板',
                tag: '高級'
            },
            {
                id: 3,
                category: 'adhesives',
                name: 'KD 專用強力膠 (3kg)',
                price: 850,
                originalPrice: 950,
                image: '強力膠',
                tag: '師傅推薦'
            },
            {
                id: 4,
                category: 'adhesives',
                name: 'KD 環保噴膠 (加強型)',
                price: 420,
                originalPrice: 480,
                image: '環保噴膠',
                tag: null
            },
            {
                id: 5,
                category: 'paint',
                name: 'KD 專用修補漆 (自選色)',
                price: 350,
                originalPrice: null,
                image: '修補漆',
                tag: '多色可選'
            },
            {
                id: 6,
                category: 'paint',
                name: 'KD 專用修補筆',
                price: 150,
                originalPrice: 180,
                image: '修補筆',
                tag: '便攜'
            },
            {
                id: 7,
                category: 'tools',
                name: 'KD 羊毛刷 (2吋)',
                price: 80,
                originalPrice: null,
                image: '羊毛刷',
                tag: null
            },
            {
                id: 8,
                category: 'tools',
                name: '不織布透氣膠帶 (遮蔽用)',
                price: 45,
                originalPrice: 60,
                image: '遮蔽膠帶',
                tag: '箱購優惠'
            },
            {
                id: 9,
                category: 'tools',
                name: 'KD 塗裝板專用修邊刀',
                price: 1200,
                originalPrice: 1500,
                image: '修邊刀',
                tag: '專業用'
            },
            {
                id: 10,
                category: 'accessories',
                name: 'KD 收邊條專用膠',
                price: 280,
                originalPrice: null,
                image: '收邊膠',
                tag: null
            },
            {
                id: 11,
                category: 'accessories',
                name: '木地板踢腳板 2.4m',
                price: 120,
                originalPrice: 150,
                image: '踢腳板',
                tag: '配套'
            },
            {
                id: 12,
                category: 'accessories',
                name: '地板收邊條 鋁合金',
                price: 85,
                originalPrice: null,
                image: '收邊條',
                tag: null
            }
        ];

        const categories = [
            { id: 'all', name: '全部商品' },
            { id: 'flooring', name: '木地板材' },
            { id: 'adhesives', name: '黏著劑' },
            { id: 'paint', name: '塗裝修補' },
            { id: 'tools', name: '施工工具' },
            { id: 'accessories', name: '五金配件' }
        ];

        let currentCategory = 'all';
        let cartCount = 0;

        // Render Functions
        function renderCategories() {
            const container = document.getElementById('category-container');
            container.innerHTML = categories.map(cat => `
                <button 
                    onclick="filterCategory('${cat.id}')"
                    class="whitespace-nowrap px-4 py-1.5 rounded-full text-sm font-medium transition-colors duration-200 ${
                        currentCategory === cat.id 
                        ? 'bg-kd text-white shadow-md' 
                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                    }">
                    ${cat.name}
                </button>
            `).join('');
        }

        function renderProducts() {
            const grid = document.getElementById('product-grid');
            const countLabel = document.getElementById('product-count');
            
            const filtered = currentCategory === 'all' 
                ? products 
                : products.filter(p => p.category === currentCategory);
            
            countLabel.innerText = filtered.length;

            grid.innerHTML = filtered.map(product => `
                <div class="bg-white rounded-lg card-shadow overflow-hidden flex flex-col h-full active:scale-[0.98] transition-transform duration-100">
                    <div class="relative w-full h-40 bg-gray-200 flex items-center justify-center overflow-hidden">
                        <!-- Simulated Product Image using Placehold.co -->
                        <img src="https://placehold.co/300x300/E5E7EB/003366?text=${product.image}" alt="${product.name}" class="w-full h-full object-cover">
                        ${product.tag ? `<span class="absolute top-2 left-2 bg-red-500 text-white text-[10px] px-2 py-0.5 rounded shadow">${product.tag}</span>` : ''}
                    </div>
                    
                    <div class="p-3 flex flex-col flex-grow">
                        <h4 class="text-sm font-bold text-gray-800 line-clamp-2 leading-relaxed h-10 mb-1">${product.name}</h4>
                        
                        <div class="mt-auto">
                            <div class="flex items-baseline gap-2">
                                <span class="text-red-600 font-bold text-lg">NT$${product.price}</span>
                                ${product.originalPrice ? `<span class="text-xs text-gray-400 line-through">NT$${product.originalPrice}</span>` : ''}
                            </div>
                            
                            <!-- 雙按鈕設計：適合不同用戶群體 -->
                            <div class="mt-3 flex gap-2">
                                <button 
                                    onclick="quickOrder('${product.name}')"
                                    class="flex-1 bg-green-500 text-white py-2 px-3 rounded font-medium text-sm hover:bg-green-600 transition-colors duration-200 flex items-center justify-center gap-1">
                                    <i class="fab fa-line"></i>
                                    快速叫料
                                </button>
                                <button 
                                    onclick="addToCart(this)"
                                    class="flex-1 bg-white border border-kd text-kd hover:bg-kd hover:text-white py-2 px-3 rounded font-medium text-sm transition-colors duration-200 flex items-center justify-center gap-1">
                                    <i class="fas fa-cart-plus"></i>
                                    購物車
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Logic Functions
        function filterCategory(catId) {
            currentCategory = catId;
            renderCategories();
            renderProducts();
        }

        function addToCart(btn) {
            // UI Feedback
            cartCount++;
            const badge = document.getElementById('cart-badge');
            badge.innerText = cartCount;
            badge.classList.remove('scale-0');
            
            // Button Animation
            const originalText = btn.innerHTML;
            btn.classList.add('bg-kd', 'text-white');
            btn.classList.remove('bg-white', 'text-kd');
            btn.innerHTML = '<i class="fas fa-check"></i> 已加入';
            
            setTimeout(() => {
                btn.classList.remove('bg-kd', 'text-white');
                btn.classList.add('bg-white', 'text-kd');
                btn.innerHTML = originalText;
            }, 1000);

            // Toast Notification
            showToast();
        }

        function showToast() {
            const toast = document.getElementById('toast');
            toast.classList.remove('hidden');
            toast.classList.add('toast-enter');
            
            // Reset after 2 seconds
            setTimeout(() => {
                toast.classList.remove('toast-enter');
                toast.classList.add('hidden');
            }, 2000);
        }

        // LINE Chat Function for 木工師傅
        function openLineChat() {
            // 模擬LINE LIFF功能，實際會串接LINE OA
            alert('正在開啟 LINE 聊天...\n\n可以直接告訴業務：\n• 需要什麼材料\n• 工地地址\n• 預計用量\n\n業務會立即回覆報價！');
        }

        // 快速叫料功能 - 針對師傅設計的簡化流程
        function quickOrder(productName) {
            const message = `我需要: ${productName}\n\n請業務報價，謝謝！`;
            // 實際會透過LINE API傳送
            alert(`已發送叫料訊息給業務：\n\n"${message}"\n\n業務將在5分鐘內回覆報價。`);
        }

        // 大字體模式切換 - 針對50+歲用戶
        let isLargeFont = false;
        function toggleFontSize() {
            isLargeFont = !isLargeFont;
            const body = document.body;
            
            if (isLargeFont) {
                body.classList.add('large-font');
                // 儲存用戶偏好
                localStorage.setItem('kdLargeFont', 'true');
            } else {
                body.classList.remove('large-font');
                localStorage.setItem('kdLargeFont', 'false');
            }
        }

        // 載入用戶字體偏好
        function loadFontPreference() {
            const savedPref = localStorage.getItem('kdLargeFont');
            if (savedPref === 'true') {
                isLargeFont = true;
                document.body.classList.add('large-font');
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadFontPreference();
            renderCategories();
            renderProducts();
        });

    </script>
</body>
</html>